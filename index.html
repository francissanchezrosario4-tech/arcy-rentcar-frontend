
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Arcy Rent Car – Clientes (Online)</title>
  <style>
    body { background:#0f0f0f; color:#fff; font-family:Arial, Helvetica, sans-serif; }
    .container { max-width:1100px; margin:40px auto; padding:20px; }
    h1 { color:#e50914; }
    .card { background:#1a1a1a; border-radius:12px; padding:20px; margin-bottom:20px; }
    label { display:block; margin-top:10px; }
    input, select { width:100%; padding:10px; margin-top:6px; border-radius:8px; border:1px solid #333; background:#111; color:#fff; }
    button { margin-top:14px; padding:10px 16px; border:none; border-radius:8px; background:#e50914; color:#fff; cursor:pointer; }
    table { width:100%; border-collapse:collapse; margin-top:10px; }
    th, td { padding:10px; border-bottom:1px solid #333; text-align:left; }
    th { color:#e50914; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Clientes – 100% Online</h1>

    <div class="card">
      <h3>Agregar cliente</h3>
      <label>Nombre</label>
      <input id="clienteNombre" />
      <label>Teléfono</label>
      <input id="clienteTelefono" />
      <label>Cédula / ID</label>
      <input id="clienteCedula" />
      <label>Nota</label>
      <input id="clienteNota" />
      <label>Valoración</label>
      <select id="clienteValoracion">
        <option value="1">⭐</option>
        <option value="2">⭐⭐</option>
        <option value="3">⭐⭐⭐</option>
        <option value="4">⭐⭐⭐⭐</option>
        <option value="5" selected>⭐⭐⭐⭐⭐</option>
      </select>
      <button onclick="guardarCliente()">Guardar cliente</button>
    </div>

    <div class="card">
      <h3>Listado de clientes (BD)</h3>
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>Nombre</th>
            <th>Teléfono</th>
            <th>Cédula</th>
            <th>Nota</th>
            <th>Valoración</th>
          </tr>
        </thead>
        <tbody id="tbodyClientes"></tbody>
      </table>
    </div>
  </div>

<script>
const API = "https://arcy-rentcar-backend-production.up.railway.app";

async function guardarCliente() {
  const nombre = document.getElementById("clienteNombre").value.trim();
  if (!nombre) return alert("Nombre requerido");

  const data = {
    nombre,
    telefono: document.getElementById("clienteTelefono").value,
    cedula: document.getElementById("clienteCedula").value,
    nota: document.getElementById("clienteNota").value,
    valoracion: Number(document.getElementById("clienteValoracion").value)
  };

  const res = await fetch(`${API}/clientes`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(data)
  });

  if (!res.ok) return alert("Error guardando cliente");

  document.getElementById("clienteNombre").value = "";
  document.getElementById("clienteTelefono").value = "";
  document.getElementById("clienteCedula").value = "";
  document.getElementById("clienteNota").value = "";

  await cargarClientes();
  alert("Cliente guardado en la base de datos ✅");
}

async function cargarClientes() {
  const res = await fetch(`${API}/clientes`);
  const clientes = await res.json();

  const tbody = document.getElementById("tbodyClientes");
  tbody.innerHTML = "";

  clientes.forEach(c => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${c.id}</td>
      <td>${c.nombre}</td>
      <td>${c.telefono || ""}</td>
      <td>${c.cedula || ""}</td>
      <td>${c.nota || ""}</td>
      <td>${"⭐".repeat(c.valoracion || 0)}</td>
    `;
    tbody.appendChild(tr);
  });
}

document.addEventListener("DOMContentLoaded", cargarClientes);
</script>
</body>
</html>
